---
title: "HW 2 for P8105 - hlz2108"
output: github_document
---

The code chunk below loads libraries.

```{r Library_Setup}
library(tidyverse)
library(readxl)
```

##Problem 1

Reading in Mr. Trash Wheel dataset.

```{r Trash_Wheel_df}
trash_wheel_df =
  read_excel(
    "./data/Trash_Wheel.xlsx",
    sheet = "Mr. Trash Wheel",
    range = cell_cols ("A:N")) %>%
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls)
  ) %>% 
view
```

Read precipitation data!

```{r Precipitation_df}
precip_2018 = 
 read_excel(
    "./data/Trash_Wheel.xlsx",
    sheet = "2018 Precipitation",
    skip = 1
 ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2018) %>% 
  relocate(year)
  
precip_2017 = 
 read_excel(
    "./data/Trash_Wheel.xlsx",
    sheet = "2017 Precipitation",
    skip = 1
 ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2017) %>% 
  relocate(year)
```

Now combine annual precipitation

```{r Combine_Precip}
month_df = 
  tibble(
    month = 1:12,
    month_name = month.name
  )

precip_df =
  bind_rows(precip_2018,precip_2017)

left_join(precip_df, month_df, by = "month")
```

This data set contains information from the Mr. Trashwheel trash collector in Baltimore, Maryland. As trash enters the inner harbor, the trashwheel collects that trash, and stores it in a dumpster. The dataset contains information on year, month, and trash collected, including some specific kinds of trash. There are a total of `r nrow(trash_wheel_df)` rows in our final dataset. Additional data sheets include month precipitation data. 

##Problem 2

Reading in and cleaning NYC Transit Data.

```{r NYC_Transit_df}
NYC_transit_df = 
  read_csv(
    "./data/NYC_Transit_Data.csv") %>%
  janitor::clean_names() %>%
  select(line, station_name, station_latitude, station_longitude, route1:route11, entry, vending, entrance_type, ada) %>% 
  mutate(entry = recode(entry,`YES` = TRUE, `NO` = FALSE )) %>% 
view
```

This data set contains information related to each entrance and exit for each subway station in NYC. In our final dataset, I have only included the following variables: `r names(NYC_transit_df)` and removed several others, such as entrance and exit locations. In cleaning the data, the entry variable was converted into a logical variable. There are a total of `r nrow(NYC_transit_df)` rows and `r ncol(NYC_transit_df)` columns in our final dataset. 

The data is not tidy in the final dataset as there are many NA variables in the route columns. Also, route number is spread across 11 separate columns instead of being condensed into 1.

There are a total of `r count(distinct(NYC_transit_df, line, station_name))` distinct stations.

`r sum(pull(NYC_transit_df,ada), na.rm=FALSE)` stations are ADA compliant.

The proportion of station entrances/exits without vending that allow entrance are `r filter(NYC_transit_df, vending == "NO" & entry == "TRUE") %>% nrow / filter(NYC_transit_df, vending == "NO") %>% nrow`.
 
The code chunk below creates a dataset that tidies up the previous NYC Transit dataset, and reformats the data so that the route number and route name are distinct variables..

```{r Transit_Tidy_df}
transit_df = 
  NYC_transit_df %>% 
  mutate_at(vars(route1:route11), replace_na, 'None') %>% 
  pivot_longer(
    route1:route11,
    names_to = "route_number",
    values_to = "route_name") %>% 
  view()

transit_df
```

The code chunk below creates a dataset that contains only stations that serve the A Train.

```{r ATrain_df}
ATrain_df = 
  filter(transit_df, route_name == "A")
```

There are `r count(distinct(ATrain_df, line, station_name))` distinct stations that serve the A train.

Of the stations that serve the A train, `r sum(pull(ATrain_df,ada), na.rm=FALSE)` stations are ADA compliant.

##Problem 3

Reading in FiveThirtyEight Data.

```{r FiveThirtyEight_df}
pols_month_df = read_csv("./data/fivethirtyeight_datasets/pols-month.csv")
unemployment_df = read_csv("./data/fivethirtyeight_datasets/unemployment.csv")
snp_df = read_csv("./data/fivethirtyeight_datasets/snp.csv")
```

